–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

[![–°—Ç–∞—Ç—É—Å](https://img.shields.io/badge/—Å—Ç–∞—Ç—É—Å-–∞–∫—Ç–∏–≤–Ω—ã–π-brightgreen)](—Å—Å—ã–ª–∫–∞_–Ω–∞_—Å—Ç–∞—Ç—É—Å)

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë–∞–∑–æ–≤–∞—è_–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–ë–∞–∑–æ–≤–∞—è_–ù–∞—Å—Ç—Ä–æ–π–∫–∞)
- [ISP](#ISP)
- [HQ-RTR](#HQ-RTR)
- [HQ-SRV](#HQ-SRV)
- [BR-RTR](#BR-RTR)
- [BR-SRV](#BR-SRV)
- [–î–æ–ø_–∏–Ω—Ñ](#–î–æ–ø_–∏–Ω—Ñ)

## –ë–∞–∑–æ–≤–∞—è_–ù–∞—Å—Ç—Ä–æ–π–∫–∞
<b>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–º–µ–Ω–∏</b>  
–î–ª—è –Ω–∞—á–∞–ª–æ –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –∏–º–µ–Ω–Ω–∞ –Ω–∞ –º–∞—à–∏–Ω–∞—Ö   
`hostnamectl set-hostname –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞`  

    
<b>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤</b>  
–î–∞–ª–µ–µ –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä—Ç—ã –Ω–∞ –∫–∞–∂–¥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
```
auto ens224  
iface ens224 inet static  
address 172.16.4.1  
netmask 255.255.255.240
```  
–ï—â—ë –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞ `gateway –∞–π–ø–∏` –ü–∏—à–µ–º —Ç–∞–º –≥–¥–µ –Ω—É–∂–µ–Ω gateway  
  
–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ:
  
1. ens*** - –ø–æ—Ä—Ç  
2. –ê–π–ø–∏—à–Ω–∏–∫–∏ –∏ –º–∞—Å–∫–∏ —Å–º–æ—Ç—Ä–∏–º –ø–æ –∑–∞–¥–∞–Ω–∏—é
  
<b>!!!–í–ù–ò–ú–ê–ù–ò–ï!!!</b>  
–ï—Å–ª–∏ –≤ –∑–∞–¥–∞–Ω–∏–∏ –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∞ –±—É–¥–µ—Ç  
–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞—Ç—å –≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫–ª—é—á–∏—Ç—å  
–ø—Ä–æ–≤–µ—Ä–∫—É –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ cdrom –∑–∞–π–¥—è –ø–æ –ø—É—Ç–∏:  
`Nano /etc/apt/sources.list`  

–ù–∞ HQ-RTR –∏ BR-RTR –ù—É–∂–Ω–æ –∑–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª `/etc/resolv.conf` –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É: `nameserver 1.1.1.1`

–í–µ–∑–¥–µ –Ω—É–∂–Ω–æ –∑–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª `/etc/sysctl.conf` –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É `net.ipv4.ip_forward=1`

## ISP  
–í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑–æ–≤–æ—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ—Å–ª–µ –∏–¥—Ç–∏ –Ω–∏–∂–µ  
<b>iptables</b>  
```
apt install iptables  
apt install iptables iptables-persistent  
iptables ‚Äìt nat ‚ÄìA POSTROUTING ‚Äìs 172.16.4.0/28 ‚Äìo ens192 ‚Äìj MASQUERADE  
iptables ‚Äìt nat ‚ÄìA POSTROUTING ‚Äìs 172.16.5.0/28 ‚Äìo ens192 ‚Äìj MASQUERADE  
iptables-save > /etc/iptables/rules.v4  
```
  
–ê–π–ø–∏—à–Ω–∏–∫ —ç—Ç–æ –ø–æ–¥—Å–µ—Ç—å –∫—É–¥–∞ –∏–¥—ë—Ç nat, ens192 —ç—Ç–æ –ø–æ—Ä—Ç —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º  

–î–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã—à–ª–æ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:  
`iptables ‚ÄìL ‚Äìt nat` 
<details>
<summary>‚úîÔ∏è –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</summary>

–ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–∞—à —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–º–µ—Ç –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫.

</details>  

## HQ-RTR
–í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑–æ–≤–æ—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ—Å–ª–µ –∏–¥—Ç–∏ –Ω–∏–∂–µ  
<b>vlan</b>  
```
apt install vlan
modprobe 8021q
echo 8021q >> /etc/modules  
```
–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø—Ä–∏–º–µ—Ä —É–∫–∞–∑–∞–Ω –Ω–∏–∂–µ:  
```
auto ens192  
iface ens192 inet static  
address 172.16.4.2  
netmask 255.255.255.240  
gateway 172.16.4.1  
  
auto ens224  
iface ens224 inet static  
address 192.168.100.1  
netmask 255.255.255.192  
  
auto ens224:1  
iface ens224 inet static  
address 192.168.200.1  
netmask 255.255.255.240  

auto ens224.100  
iface ens224 inet static  
address 192.168.100.3  
netmask 255.255.255.192  
Vlan-raw-device ens224  
  
auto ens224:1.200  
iface ens224 inet static  
address 192.168.200.3  
netmask 255.255.255.240  
Vlan-raw-device ens224:1
```
  
<b>iptables</b>  
`iptables ‚Äìt nat ‚ÄìA POSTROUTING ‚Äìs 192.168.100.0/26 ‚Äìo ens192 ‚Äìj MASQUERADE`  
  
<b>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</b>  
–°–æ–∑–¥–∞–Ω–∏–µ 
`adduser –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è`  
  
–î–ª—è —Å–º–µ–Ω—ã id –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `usermode -u 1010 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å`  
–¢–∞–∫ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤—ã–¥–∞—Ç—å Root –ø—Ä–∞–≤–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —ç—Ç–æ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å 
–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–æ–º–∞–Ω–¥—ã `visudo`
![user_root](user_root.png)


## –î–æ–ø_–∏–Ω—Ñ
<details>
<summary>üé≠ –¢–∞–±–ª–∏—Ü–∞ –ú–∞—Å–æ–∫</summary>

![–õ–æ–≥–æ—Ç–∏–ø –ø—Ä–æ–µ–∫—Ç–∞](–ë–µ–∑—ã–º—è–Ω–Ω—ã–π.png)

</details>  

